INTRODUZIONE:
Tale progetto definito Base, offre la struttura base per poter realizzare cloud ready app.
Predispone meccanismi di espondibilità dell'ecosistema, inserendo nuovi micro servizi, schermandoli con meccanismi di sicuezza OAUTH2.
Espone 4 API:
http://___zuul-kube-service-static-ip___:8120/api/ms0/auth
http://___zuul-kube-service-static-ip___:8120/api/ms0/user/create
http://___zuul-kube-service-static-ip___:8120/api/ms0/actuator/**
http://___zuul-kube-service-static-ip___:8120/api/ms0/swagger-ui.html

L'intero ecosistema server ha modo di autoaccensione e autospegnimento a preconfigurate ore.

AVVIO ECOSISTEMA APP:
L’ecosistema di micro servizi è costituito dalle seguenti macro sezioni:
-	microservizio user (ms-user): utilizzato per la gestione delle utenze;
-	microservizio zuul (ms-zuul): utilizzato per la gestione dei flussi di chiamata.
-	Database mysql.

CREAZIONE DATABASE Base
Si avvii una istanza locale docker contenente mysql. Attraverso l’IDE MysqlWorkbench ci si colleghi e si avvii lo script di creazione delle due tabelle db/dump20240118.sql
Si avvii lo script db/INSERT_AN002.sql di popolamento della tabella AN002_RUOLO; si modifichi come e se opportuno, non rimuovendo però il ruolo ‘ADMIN’, esso necessario alla creazione delle utenze, come definito all’interno del filtro della zona applicativa ms-zuul, classe com.faraday.webapp.security.SecurityTokenConfig.
Si inserisca un primo record, all’interno della tabella AN001_USER, contenente il ruolo ‘ADMIN’.
Tale utenza è utilizzata successivamente alla creazione di nuove utenze, tramite API /user/create, previo ottenimento del token.

AVVIO MS-USER
Il microservizio espone le sole due API necessarie a realizzare, all'interno di un sistema avanzanto di micrservizi, un meccansmo di autenticazione 
che rispetti il protocollo OAUTH2.
Le API presenti riusultano:
POST /user/create
POST /auth

Si modifichino all’interno del file yml le properties username e password per l’accesso al db. 
Si verifichi la presenza della configurazione di avvio, essa presente all’interno del file launch.json e che quindi contenga la struttura siffatta:
{
  "version": "0.2.0",
  "configurations": [
    {
      "type": "java",
      "name": "Launch User",
      "request": "launch",
      "mainClass": "com.faraday.webapp.Application",
      "projectName": "USER-MICRO-SERVICE",
      "vmArgs": [
        "-Dspring.profiles.active=struct1",
        "-DMySqlIp=127.0.0.1"
      ]
    }
  ]
}
 
L’app selezionarà il profilo di avvio ‘struct1’.
Si avvi l’app.
Presenti all’interno della folder db/postman sezine USER-MICRO-SERVICE, preconfigurate chiamate al microservizio.

Un’importante considerazione riferisce l’assenza di filtri agli end-point. 
Se pur presenti meccanismi di sicurezza attraverso la library Spring Security, la tecncologia, in tal contesto è utilizzata solo per
l'esposizione delL'API /auth.
E’ quindi possibile poter richiamare l’API POST user/create, senza alcun token di accesso.

AVVIO MS-ZULL
Si verifichi presenza file launch.json siffatto:
{
  "version": "0.2.0",
  "configurations": [
    {
      "type": "java",
      "name": "Launch ZUUL",
      "request": "launch",
      "mainClass": "com.faraday.webapp.Application",
      "projectName": "ZUUL-MICRO-SERVICE",
      "vmArgs": [
        "-Dspring.profiles.active=struct1",
        "-DMsUserIp=127.0.0.1"
      ]
    }
  ]
}

Si avvi quindi il microservizio.
Presenti all’interno della folder db/postman sezine API-GATWAY, preconfigurate chiamate al microservizio.

TEST:
Si avvii ms-user, si avvii ms-zull.
Si applichi una chiamata post-man al micro servizio /api/ms0/auth, utilizzando le credenziali con ruolo AMDIN, inserite in fase di creazione del DB.
Si estragga dalla response il token e si inserisca all’interno della chiamata che necessita di un dato ruolo, affinchè sia eseguita.  
I dettagli sulla stretta corrispondenza ruolo end point presenti all'interno della classe ms-zuul >  com.faraday.webapp.security.SecurityTokenConfig


 MESSA ONLINE:
 Per la messa on-line dell'intero ecosistema si verifichi quanto presente all'interno della folder doc/diagrammi/architettura-base-project.pdf 
 e si eseguano le istruzioni prensenti all'interno del file kubernatesConfig progetto Kubernates.
 Presenti, nella fodler kubernates/postman collection kubernates, le chiamate preconfigurate agli end-point
http://___zuul-kube-service-static-ip___:8120/api/ms0/user/create
http://___zuul-kube-service-static-ip___:8120/api/ms0/auth
http://___zuul-kube-service-static-ip___:8120/actuator